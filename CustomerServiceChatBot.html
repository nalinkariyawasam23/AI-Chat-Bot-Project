<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Bot</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <!-- bootstrap 3.0.2 -->
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Ionicons -->
        <link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="css/AdminLTE.css" rel="stylesheet" type="text/css" />
		
		 <link href="css/style2.css" rel="stylesheet" type="text/css" />
		
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>
    <body class="skin-black">
		
        <!-- header logo: style can be found in header.less -->
        <header class="header">
            <a href="index.html" class="logo">
                <!-- Add the class icon to your logo image or logo icon to add the margining -->             
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top" role="navigation">                
               
                <div class="navbar-right">
                    <ul class="nav navbar-nav">                                               
                        <!-- User Account: style can be found in dropdown.less -->
                        <li class="dropdown user user-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="glyphicon glyphicon-user"></i>
                                <span>Log Out <i class="caret"></i><a href="logout.php"></a></span>
								
                            </a>                            
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <div class="wrapper row-offcanvas row-offcanvas-left">
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="left-side sidebar-offcanvas">                
                <!-- sidebar: style can be found in sidebar.less -->
                <section class="sidebar">
                    <!-- Sidebar user panel -->
                    <div class="user-panel">
                        <div class="pull-left image">
                            <img src="img/avatar3.png" class="img-circle" alt="User Image" />
                        </div>
                        <div class="pull-left info">
                            <p>Hello, Nalin</p>
                            <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                        </div>
                    </div>
                    <!-- search form -->
                    <form action="#" method="get" class="sidebar-form">
                        <div class="input-group">
                            <input type="text" name="q" class="form-control" placeholder="Search..."/>
                            <span class="input-group-btn">
                                <button type='submit' name='seach' id='search-btn' class="btn btn-flat"><i class="fa fa-search"></i></button>
                            </span>
                        </div>
                    </form>
                   
				   
				   <ul class="sidebar-menu">                        
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-laptop"></i>
                                <span>Help</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>                            
                        </li>                      
                        
                        <li>
                            <a href="pages/calendar.html">
                                <i class="fa fa-calendar"></i> <span>Calendar</span>
                                <small class="badge pull-right bg-red">23</small>
                            </a>
                        </li>                        
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-folder"></i> <span>Examples</span>
                                <i class="fa fa-angle-left pull-right"></i>
                            </a>                            
                        </li>
                    </ul>
					
					
				   
                </section>
                <!-- /.sidebar -->
            </aside>

            <!-- Right side column. Contains the navbar and content of the page -->
            <aside class="right-side">                
                <!-- Content Header (Page header) -->
                <section class="content-header">
				
<div class="row">		
        <div class="col-md-8 col-md-offset-2" style="margin-top:100px">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <center>
                        <strong>                            
								<div >
									<p></p>
										<i class="fa fa-circle text-success">&nbsp Chat - Nalin</i>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										<button type="button" class="close" aria-label="Close">											
											<span aria-hidden="true">&times;</span>																				
										</button>										
								</div>
                        </strong>
                    </center>
                </div>
                <div class="panel-body" style="background-color: rgba(156, 173, 255, 0.4);">
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2">
                            
							
							<div class="form-group">
                                <p>
                                    <i class="glyphicon glyphicon-user"></i>
                                    <i class="glyphicon glyphicon-menu-right"></i> <i> Smart Agent Feedback</i>
                                </p>
								
								
								<!-- <div class="col-sm-3 col-sm-offset-4 frame">									
									<ul></ul>
									<div>
										<div class="msj-rta macro" style="margin:auto">                        
											<div class="text text-r" style="background:whitesmoke !important">
												<input class="mytext" placeholder="Type a message"/>
											</div> 
										</div>
									</div>
								</div>   --> 
								
                                <textarea id="msg" class="form-control" rows="5" cols="47" style="background-color: rgb(89, 100, 119); border: 1px solid #DDDDDD; border-radius: 3px 3px 3px 3px; box-shadow: 1px 1px 3px #EEEEEE inset; color: white; font-size: 1.8rem; font-family: Cambria, Georgia, Times, 'Times New Roman', serif; padding: 1.6rem; width: 100%; font-style: italic;" readonly></textarea> 
								  
                            </div>
							  <hr>
							<div>								
                                <p>
                                    <i class="glyphicon glyphicon-user"></i>
                                    <i class="glyphicon glyphicon-menu-right"></i> <i>Type Message</i>
                                </p>
									<div> <!-- class="panel-footer" -->
										<div class="input-group">
											<input class="form-control" type="text" onkeydown="mykeypress(event);" id="intext" maxlength="95" size="45" value="" style="font-style: italic;"/>
											<span class="input-group-btn">												
												<button class="btn btn-primary pull-right" id="say" onclick="say();">Send</button>
											</span>
										</div>
									</div>
                                <!-- <input   class="form-control" type="text" onKeyDown="mykeypress(event);" id="asd" maxlength="95" size="45" value="3er4e"/> -->
                                <label id="asd"></label>                               
                            </div>                         
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
       </section>

                <!-- Main content -->
                <section class="content">


                </section><!-- /.content -->
            </aside><!-- /.right-side -->
        </div><!-- ./wrapper -->


        <!-- jQuery 2.0.2 -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <!-- Bootstrap -->
        <script src="js/plugins/bootstrap.min.js" type="text/javascript"></script>
        <!-- AdminLTE App -->
        <script src="js/plugins/AdminLTE/app.js" type="text/javascript"></script>
			

<!--Linked data set from external js files-->
  <script type="text/javascript" src="mytemplates.js"></script>
        <script type="text/javascript" src="databaseone.js"></script>
        <script type="text/javascript" src="mywords.js"></script>
        <script type="text/javascript" src="databasetwo.js"></script>
        <script type="text/javascript" src="mystarpatt.js"></script>
        <script type="text/javascript" src="mystarpatt2.js"></script>
        <script type="text/javascript" src="mystartemp.js"></script>
        <script type="text/javascript" src="myyandexkey.js"></script>
        <script type="text/javascript">

           		
			var myvbuff = new Array(100000);
            var mynvert = 0; var auxvar = "", auxtext = "";
            var test = 112; var mymesh = null; var dataobj = ""; var myscene = null, mytexture = null;
            var imagesrc = ""; var mymesh1 = null, mymesh2 = null, mymesh3 = null, mymesh4 = null, bodytext = null;
            var crlf = "\r\n";
            var v = [];
            var patterns = [], templates = [], allwords = [], allwordspatt = [];
            patterns = mypatterns.split("\n");
            templates = mytemplates.split("\n");
            allwords = mywords.split("\n");
            allwordspatt = mywordspatt.split("\n");
            var iaiml = patterns.length - 1;
            var iallword = allwords.length - 1;
            var starpatt = [], starpatt2 = [], startemp = [];
            starpatt = mystarpatt.split("\n");
            starpatt2 = mystarpatt2.split("\n");
            startemp = mystartemp.split("\n");
            var istar = starpatt.length - 1;

            function getiallword(text) {
                var i, j, k, l;
                i = 1; j = iallword;
                while ((j - i) >= 2)
                {
                    k = parseInt(i + (j - i) / 1.99);
                    if (text >= allwords[k - 1])
                    {
                        i = k;
                    }
                    else
                    {
                        j = k;
                    }
                }
                if (text == allwords[i - 1])
                {
                    return i;
                }
                if (text == allwords[j - 1])
                {
                    return j;
                }
                l = text.length;
                if (text == allwords[i - 1].substr(0, l))
                {
                    return -i;
                }
                if (text == allwords[j - 1].substr(0, l))
                {
                    return -j;
                }
                return 0;
            }

            function weight(x) {
                return Math.sqrt(Math.abs(x));
            }
            function replaceall(text0, str1, str2) {
                var text = text0;
                for (var p = 0; p < 100; p++)
                {
                    if (text.indexOf(str1) < 0)
                    {
                        break;
                    }
                    text = text.replace(str1, str2);
                }
                return text;
            }

            //input format
            function formatinput(text0) {
                var text = text0.toLowerCase();
                text = replaceall(text, "'", " ");
                text = replaceall(text, ",", " ");
                text = replaceall(text, ";", " ");
                text = replaceall(text, ":", " ");
                text = replaceall(text, ".", " ");
                text = replaceall(text, "!", " ");
                text = replaceall(text, "(", " ");
                text = replaceall(text, ")", " ");
                text = replaceall(text, "?", " ");
                text = replaceall(text, "  ", " ");
                //text = replaceall(text, "Ã©", "e");
                //text = replaceall(text, "Ã¨", "e");
                //text = replaceall(text, "Ãª", "e");
                //text = replaceall(text, "Ã®", "i");
                //text = replaceall(text, "Ã´", "o");
                //text = replaceall(text, "Ã¹", "u");
                //text = replaceall(text, "Ã»", "u");
               // text = replaceall(text, "Ã ", "a");
                //text = replaceall(text, "Ã¢", "a");
               // text = replaceall(text, "Ã§", "c");
                return text.trim();
            }

            function formatoutput(text0) {
                var text = text0.toLowerCase();
                text = replaceall(text, "Ã®", "i");
                text = replaceall(text, "Ã´", "o");
                text = replaceall(text, "Ã¹", "u");
                text = replaceall(text, "Ã»", "u");
                text = replaceall(text, "Ã ", "a");
                text = replaceall(text, "Ã¢", "a");
                text = replaceall(text, "Ã§", "c");
                return text.trim();
            }

            var botsize = iaiml;
            var testpattern = new Array(iaiml + 1);
            var testiword = new Array(iaiml + 1);
            var testnword = new Array(iaiml + 1);
            var tweight = new Array(iaiml + 1);

            for (var i = 0; i <= iaiml; i++)
            {
                tweight[i] = 1; testpattern[i] = 1;
                testnword[i] = 0; testiword[i] = 0;
            }

            var textparse = [], iparse = 0, inputword = [];
            var nouttemplate = 300, iouttemplate = new Array(nouttemplate);
            var oldmsg = "", msgprocess = "", msgmsg = "";
            var testproc = 0, teststar = 0, starrandom = 1;

            function processinputstar(text0) {
                var i = 0, j = 0, k = 0, l = 0, p = 0, n = 0, nbword = 0, test = 0;
                var msg = "", outmsg = "", patt = "", patt2 = "", temp = "", text = "", startext = "";
                text = text0;

                for (i = 0; i < istar; i++)
                {
                    k = starpatt[i].length; test = 1;
                    if (k > 0)
                    {
                        if (text.substr(0, k) != starpatt[i]) { test = 0; };
                    }
                    if (test == 1)
                    {
                        l = starpatt2[i].length; test = 1; p = text.length;
                        if (l > 0)
                        {
                            if (text.substr(p - l, l) != starpatt2[i]) { test = 0; };
                        }
                        if (test == 1)
                        {
                            n = p - l - k;
                            startext = text.substr(k, n);
                            if (startext != "")
                            {
                                testproc = 1;
                                break;
                            }
                        }
                    }
                }

                if (testproc == 1)
                {
                    msg = startemp[i];
                    msg = replaceall(msg, "/botname/", "Helen");
                    msg = replaceall(msg, "/botmaster/", "agent")
                    msg = replaceall(msg, "/date/", new Date().toDateString());
                    msg = replaceall(msg, "/size/", botsize);
                    msg = replaceall(msg, "/*/", startext);
                    outmsg = msg;

                    if (msg.indexOf("/rnd/") >= 0)
                    {
                        msg = replaceall(msg, "/rnd/", "");
                        textparse = [];
                        textparse = (msg.trim()).split("/li/");
                        iparse = textparse.length - 1;
                        outmsg = textparse[parseInt(Math.random() * iparse * 0.999) + 1];
                        msg = "";
                    }
                    else
                    {
                        msg = "";
                    }

                    outmsg = replaceall(outmsg, "/br/", crlf);
                    msg += outmsg;
                    patt = starpatt[i] + startext + starpatt2[i];
                    patt = replaceall(patt, "<bot/>", "Helen");

                    if (outmsg.length < 0.65 * patt.length)
                    {
                        outmsg = patt + " " + outmsg;
                    }

                    oldmsg = msg;
                    msgprocess = msg;
                    msgmsg = patt;
                    msg = (patt + crlf + "\n Bot: \n " + msg);  // Reply symbol
                }
                return msg;
            }

            function processinput0(text0) {
                var j = 0, k = 0, l = 0, p = 0, n = 0, nbword = 0, kj = [], q = 0, r = 0;
                var outmsg = "", msg = "", msg2 = "", allpatt = "", inword = "", patt = "";
                testproc = 0;
                teststar = 0;

                if (Math.random() < 0.5 * starrandom)
                {
                    teststar = 1;
                    starrandom = Math.max(0.12, starrandom / 1.4);
                    outmsg = processinputstar(text0);

                    if (testproc == 1)
                    {
                        return outmsg;
                    }
                }
                else
                {
                    starrandom = Math.min(1.5, starrandom * 1.1);
                }
                textparse = [];
                textparse = text0.split(" ");
                iparse = textparse.length;

                if (iparse <= 0)
                {
                    return "???";
                }

                j = 0;

                for (var i = 0; i < iparse; i++)
                {
                    inword = textparse[i];
                    inputword[i] = inword;
                }

                for (var i = 1; i <= iaiml; i++)
                {
                    testpattern[i] = 0;
                    testiword[i] = -1;
                    testnword[i] = 0;
                }

                var iparse0 = iparse;
                nbword = iparse;

                for (var i = 0; i < iparse0; i++)
                {
                    j = getiallword(inputword[i]);
                    if (j != 0)
                    {
                        var allpatt = "";
                        p = Math.abs(j);
                        l = inputword[i].length;
                        iparse = 0;

                        for (n = 1; n < 100; n++)
                        {
                            if (p <= iallword)
                            {
                                if (inputword[i] == allwords[p - 1].substr(0, l))
                                {
                                    var iparse00 = iparse;
                                    allpatt += allwordspatt[p - 1];
                                    textparse = [];
                                    textparse = allpatt.split("/");
                                    iparse = textparse.length;
                                    r = Math.max(1, allwords[p - 1].length);

                                    for (q = iparse00; q < iparse; q++)
                                    {
                                        kj[q] = (4 + l) / (4 + r);
                                    }
                                    p += 1;
                                }
                                else
                                {
                                    break;
                                }
                            }
                            else
                            {
                                break;
                            }
                        }
                        textparse = [];
                        textparse = allpatt.split("/");
                        iparse = textparse.length;

                    }
                    else
                    {
                        iparse = 0;
                    }

                    if (iparse > 0)
                    {
                        for (p = 0; p < iparse; p++)
                        {
                            n = Math.max(1, Math.min(iaiml, parseInt(textparse[p])));
                            if (testiword[n] < i)
                            {
                                testiword[n] = i;
                                testnword[n] += 1;
                                if (kj[p] > 0.87)
                                {
                                    testpattern[n] += kj[p] * weight(4 + (inputword[i].length)) * (1 + Math.random() * 0.3) * Math.sqrt(0.507 + 15 / (40 + patterns[n - 1].length));
                                }
                                else
                                {
                                    testpattern[n] += kj[p] * 0.65 * weight(4 + (inputword[i].length)) * (1 + Math.random() * 0.3) * Math.sqrt(0.507 + 15 / (40 + patterns[n - 1].length));
                                }
                            }
                        }
                    }
                }

                for (var i = 1; i <= iaiml; i++)
                {
                    testpattern[i] *= tweight[i];
                    tweight[i] = Math.min(2.0, tweight[i] * 1.1);
                    if (testnword[i] == nbword) { testpattern[i] *= 1.2; }
                }
                var xtest = 0.01;
                j = 0;

                for (var i = 1; i <= iaiml; i++)
                {
                    if (testpattern[i] > xtest)
                    {
                        xtest = testpattern[i];
                        j = i;
                    }
                }

                if (j > 0)
                {
                    k = 0;
                    var dx = xtest * 0.3;
                    for (var i = 1; i <= iaiml; i++)
                    {
                        if (Math.abs(testpattern[i] - xtest) < dx)
                        {
                            k += 1; if (k >= nouttemplate) { break; }
                            iouttemplate[k] = i;
                        }
                    }

                    j = iouttemplate[1 + parseInt(Math.random() * k * 0.999)];
                }

                if (j > 0)
                {
                    tweight[j] = Math.max(0.3 * 40 / (40 + patterns[j - 1].length), tweight[j] / 1.4);
                    msg = templates[j - 1];
                    msg = replaceall(msg, "/botname/", "Helen")
                    msg = replaceall(msg, "/botmaster/", "agent")
                    msg = replaceall(msg, "/date/", new Date().toDateString())
                    msg = replaceall(msg, "/size/", botsize)
                    outmsg = msg;

                    if (msg.indexOf("/rnd/") >= 0)
                    {
                        msg = replaceall(msg, "/rnd/", "")
                        textparse = [];
                        textparse = (msg.trim()).split("/li/");
                        iparse = textparse.length - 1;
                        outmsg = textparse[parseInt(Math.random() * iparse * 0.999) + 1];

                        //msg = "";
                    }
                    else
                    {
                        msg = "";
                    }
                    outmsg = replaceall(outmsg, "/br/", crlf);
                    msg += outmsg;
                    patt = patterns[j - 1];
                    patt = replaceall(patt, "<bot/>", "Helen");

                    if (outmsg.length < 0.65 * patt.length)
                    {
                        outmsg = patt + " " + outmsg;
                    }
                }

                if (j <= 0)
                {
                    if (teststar == 0)
                    {
                        teststar = 1;
                        testproc = 0;
                        outmsg = processinputstar(text0);
                        if (testproc == 1)
                        {
                            return outmsg;
                        }
                    }
                }
                oldmsg = msg;

                if (j > 0)
                {
                    msgprocess = msg;
                    msgmsg = patt;
                    msg = (patt + crlf + "Bot: \n " + msg);
                }
                else
                {
                    if (Math.random() < 0.35)
                    {
                        msg = "i don't see what you mean";
                    }
                    else if (Math.random() < 0.5)
                    {
                        msg = "that's too complicated for me";
                    }
                    else
                    {
                        msg = "can you be more explicit";
                    }

                    oldmsg = msg;
                    outmsg = msg;
                    msgprocess = msg;
                    msgmsg = "";
                    msg = ("\n Bot:\n " + msg); // unknown input replay
                }
                return msg;
            }

            function processinput(text0) {
                var i, j, k, n, nmax = 4;
                var text = "", mymsg = "", txt = "";

                for (n = 1; n <= nmax; n++)
                {
                    txt = processinput0(text0);

                    for (i = 1; i <= 1; i++)
                    {
                        j = msgprocess.indexOf("/srai/");

                        if (j >= 0) {
                            text = msgprocess.substr(j + 6, msgprocess.length - j - 6);
                            k = text.indexOf("/srai2/");

                            if (k >= 2) {
                                text = text.substr(0, k);
                                text = formatinput(text);
                                txt = processinput0(text);
                            }
                        }
                        else
                        {
                            n = n + 99; break;
                        }
                    }

                    if (n > 99)
                    {
                        n -= 99; if (Math.random() < 0.35)
                        {
                            break;
                        };
                    }
                    j = msgprocess.indexOf("/srai/");
                    if (j < 0 && msgprocess != "" && msgmsg != "")
                    {
                        break;
                    }
                }
                if (n > nmax)
                {
                    msgmsg = "\n Bot: \n i dont know what to say";
                    txt = msgmsg;
                }
                else if (msgmsg = "")
                {
                    msgmsg = "> " + msgprocess;
                }
                else if (i > 1 || n > 1)
                {
                    msgmsg += crlf + "\n Bot: \n" + msgprocess;
                    txt = "." + txt;
                }
                else
                {
                    msgmsg += crlf + "\n Bot: \n" + msgprocess;
                }
                return txt;
            }
        </script>
        <script type="text/javascript" src="sasha_jpg.js"></script>
        <script type="text/javascript" src="myjsc3d.js"></script>
        <script type="text/javascript">

            function close() {
                audio.pause(); audio.src = "";
            }

            var canvas;
            var viewer;
            var vbuff0 = []; var vbuff1 = [];
            var vbuff2 = []; var vbuff3 = []; var nvbuff = 0;
            var myimage = new Image;
            myimage.width = 512; myimage.height = 512;
            myimage.src = sashajpg;

            function printmsg(txt) {
                document.getElementById("msg").value = txt + crlf + auxtext;
            }

            function init() {
                canvas = document.getElementById('cv');
                viewer = new JSC3D.Viewer(canvas);
                viewer.setParameter('SceneUrl', '');
                viewer.setParameter('InitRotationX', -90);
                viewer.setParameter('InitRotationY', -5);
                viewer.setParameter('InitRotationZ', 0);
                viewer.setParameter('ModelColor', '#FFFFFF');
                //viewer.setParameter('BackgroundImageUrl','ciel.jpg');
                viewer.setParameter('BackgroundColor1', '#AFAFFF');
                viewer.setParameter('BackgroundColor2', '#8FAFAF');
                viewer.setParameter('RenderMode', 'texturesmooth');
                viewer.setParameter('MipMapping', 'on');
                viewer.setParameter('Definiton', 'standard');
                viewer.setParameter('Renderer', '');
                viewer.init();
                viewer.update();

                mymesh = new JSC3D.Mesh;
                mymesh.name = 'mymesh';
                mymesh.vertexBuffer = [];
                mymesh.indexBuffer = [];
                mymesh.texCoordBuffer = [];
                mymesh.texCoordIndexBuffer = [];
                mymesh.isDoubleSided = true;
                var mtllibs = viewer.parseObj(mymesh, sashaobj);
                mymesh.init();

                myscene = new JSC3D.Scene;
                myscene.addChild(mymesh);

                viewer.replaceScene(myscene);
                viewer.update();

                mymesh1 = new JSC3D.Mesh;
                mymesh1.name = 'mymesh1';
                mymesh1.vertexBuffer = [];
                mymesh1.indexBuffer = [];
                mymesh1.texCoordBuffer = [];
                mymesh1.texCoordIndexBuffer = [];
                var mtllibs1 = viewer.parseObj(mymesh1, sashaeyeobj);
                mymesh1.init();

                mymesh2 = new JSC3D.Mesh;
                mymesh2.name = 'mymesh2';
                mymesh2.vertexBuffer = [];
                mymesh2.indexBuffer = [];
                mymesh2.texCoordBuffer = [];
                mymesh2.texCoordIndexBuffer = [];
                var mtllibs2 = viewer.parseObj(mymesh2, sashamouthobj);
                mymesh2.init();

                mymesh3 = new JSC3D.Mesh;
                mymesh3.name = 'mymesh3';
                mymesh3.vertexBuffer = [];
                mymesh3.indexBuffer = [];
                mymesh3.texCoordBuffer = [];
                mymesh3.texCoordIndexBuffer = [];
                var mtllibs3 = viewer.parseObj(mymesh3, sashamouthoobj);
                mymesh3.init();

                setTimeout("init0();", 50);
            }

            function init0() {
                mytexture = new JSC3D.Texture;
                mytexture.onready = function () {
                    mymesh.setTexture(this);
                    viewer.update();
                };

                mytexture.createFromImage(myimage);
                mymesh.setRenderMode('texturesmooth');
                mynvert = mymesh.vertexBuffer.length;

                if (mynvert > mymesh1.vertexBuffer.length) { mynvert = mesh1.vertexBuffer.length; }
                if (mynvert > mymesh2.vertexBuffer.length) { mynvert = mesh2.vertexBuffer.length; }
                if (mynvert > mymesh3.vertexBuffer.length) { mynvert = mesh3.vertexBuffer.length; }
                if (mynvert > 100000) { mynvert = 100000; }

                setTimeout("init2();", 50);
            }

            function init2() {
                nvbuff = mynvert;

                for (var i = 0; i < nvbuff; i++)
                {
                    vbuff0.push(mymesh.vertexBuffer[i]);
                    vbuff1.push(mymesh1.vertexBuffer[i] - mymesh.vertexBuffer[i]);
                    vbuff2.push(mymesh2.vertexBuffer[i] - mymesh.vertexBuffer[i]);
                    vbuff3.push(mymesh3.vertexBuffer[i] - mymesh.vertexBuffer[i]);
                }

                mymesh1.vertexBuffer = null;
                mymesh1.indexBuffer = null;
                mymesh1.texCoordBuffer = null;
                mymesh1.texCoordIndexBuffer = null;
                mymesh2.vertexBuffer = null;
                mymesh2.indexBuffer = null;
                mymesh2.texCoordBuffer = null;
                mymesh2.texCoordIndexBuffer = null;
                mymesh3.vertexBuffer = null;
                mymesh3.indexBuffer = null;
                mymesh3.texCoordBuffer = null;
                mymesh3.texCoordIndexBuffer = null;
                sashaeyeobj = null;
                sashamouthobj = null;
                sashamouthoobj = null;
                sashaobj = null;
                sashajpg = null;

                document.getElementById('intext').focus();
                printmsg("patterns loaded:" + iaiml + crlf + "allwords:" + iallword + crlf + "stars loaded:" + istar + crlf + "enter a text or *" + crlf + crlf + crlf + "enter => repeat" + crlf + "star* => autochat");
                setTimeout("loop();", 50);
            }

            var mousex0 = 0;

            function mousemove(e) {

                if ((e.clientX - mousex0) > 2)
                {
                    mousex0 = e.clientX; viewer.rotMatrix.rotateAboutYAxis(5);
                    viewer.update();
                };

                if ((mousex0 - e.clientX) > 2)
                {
                    mousex0 = e.clientX; viewer.rotMatrix.rotateAboutYAxis(-5);
                    viewer.update();
                };
            }

            function gettimer() {
                return Date.now();
            }

            var iloop = 0, tloop = 0, quit = 0, tkeye = 0;
            var keye = 0, kmouth = 0, kmoutho = 0;

            function loop() {
                testspeak();
                drawphonemes();
                iloop += 1; if (iloop > 70) { iloop = 1; };

                if (iloop <= 35)
                {
                    viewer.rotMatrix.rotateAboutYAxis(0.2);
                }

                if (iloop > 35)
                {
                    viewer.rotMatrix.rotateAboutYAxis(-0.2);
                }

                var Timer = gettimer() / 1000.0;
                var ktime = 1.5;
                keye = (Math.sin(Timer * ktime - tkeye) * 1.3 + 0.7) * 0.32;
                var kmouth2 = kmoutho;
                var kmouth1 = kmouth + (Math.cos(Timer * ktime * 0.85) + 0.7) * 0.15 + kmoutho * 0.3;
                var kfps = 2.4;

                if ((Math.random() < 0.03 * kfps) && (keye > 1.45 * 0.32)) { keye = 0; tkeye = Timer * ktime; }
                var vbuf = mymesh.vertexBuffer;
                var nvbuf = vbuf.length;

                if (nvbuf > nvbuff) { nvbuf = nvbuff; };

                var sc = 0.895; kmouth1 *= sc; kmouth2 *= sc;

                for (var i = 0; i < nvbuf; i++) {
                    vbuf[i] = (vbuff0[i] + keye * vbuff1[i] + (kmouth1 * vbuff2[i]) + (kmouth2 * vbuff3[i]));
                }

                viewer.update();
                subfocus();

                if (quit == 0)
                {
                    tloop = setTimeout("loop();", 40);
                }
            }

            var tsubfocus = 0, tfocus = 1;

            function subfocus() {
                var timer = gettimer();

                if (timer > tsubfocus + 300)
                {
                    tsubfocus = timer;
                    var text = document.getElementById('intext').value;

                    if (tfocus)
                    {
                        document.getElementById('intext').value = "";
                    }
                    if (tfocus)
                    {
                        document.getElementById('intext').value = text;
                    }
                    if (tfocus)
                    {
                        document.getElementById('intext').focus();
                    }
                }
            }

            function resetvars() { };
            var phoneme = "", phoneme0 = "", inword = "", inword0 = "";
            var nphoneme = 7, iphoneme = 0;
            var phonemes = new Array(nphoneme);
            var tphoneme = new Array(nphoneme);

            function addphoneme(iphon) {
                var Timer = gettimer() / 1000.0;
                iphoneme += 1; if (iphoneme > nphoneme) { iphoneme = 1; };
                phonemes[iphoneme] = iphon;
                tphoneme[iphoneme] = Timer;
            }

            function drawphoneme(i) {
                var ktime, dt, dtt, d1;
                var Timer = gettimer() / 1000.0;
                ktime = 4.5;
                dt = tphoneme[i] - Timer;

                if (dt > 999)
                {
                    tphoneme[i] = 0;
                }

                dtt = dt * ktime * 0.75;

                if (dtt > 3.1416)
                {
                    return;
                }

                d1 = 0.82;
                switch (phonemes[i]) {
                    case 'o':
                        kmoutho += (Math.sin(dtt) + d1) * 0.64;
                        kmouth += kmoutho * 0.3; break;
                    case 'u':
                        kmoutho += (Math.sin(dtt) + d1) * 0.64;
                        kmouth += kmoutho * 0.3; break;
                    case 'i':
                        kmoutho += (Math.sin(dtt) + d1) * 0.24;
                        kmouth += kmoutho * 0.3;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.3; break;
                    case 'e':
                        kmoutho += (Math.sin(dtt) + d1) * 0.24;
                        kmouth += kmoutho * 0.3;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.25; break;
                    case 'w':
                        kmoutho += (Math.sin(dtt) + d1) * 0.2;
                        kmouth += kmoutho * 0.3;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.3; break;
                    case 'x':
                        kmoutho += (Math.sin(dtt) + d1) * 0.15;
                        kmouth += kmoutho * 0.2;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.2; break;
                    case 'r':
                        kmoutho += (Math.sin(dtt) + d1) * 0.18;
                        kmouth += kmoutho * 0.3;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.24; break;
                    case 'm':
                        kmoutho += (Math.sin(dtt) + d1) * 0.18;
                        kmouth += kmoutho * 0.3;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.27; break;
                    case 't':
                        kmoutho += (Math.sin(dtt) + d1) * 0.18;
                        kmouth += kmoutho * 0.2;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.27; break;
                    case 'ch':
                        kmoutho += (Math.sin(dtt) + d1) * 0.18;
                        kmouth += kmoutho * 0.25;
                        kmouth += (Math.sin(dtt) + 0.7) * 0.3; break;

                    default:
                        kmouth += (Math.sin(dtt) + 0.7) * 0.4; break;

                }
            }

            function drawphonemes() {
                if (phoneme != phoneme0)
                {
                    phoneme0 = phoneme;
                    if (phoneme == " ")
                    {
                        for (var i = 1; i <= nphoneme; i++)
                        {
                            tphoneme[i] = 0;
                        }
                    }
                    if (phoneme != " ") { addphoneme(phoneme); }
                }

                kmoutho = 0;
                kmouth = 0;
                var Timer = gettimer() / 1000.0;

                for (var i = 1; i <= nphoneme; i++)
                {
                    if (Timer < (tphoneme[i] + 1))
                    {
                        drawphoneme(i);
                    }
                }
            }

            var audiotime0 = 0, audiotime1 = 0, textspeak = "", text = "", audiosrc = "", words = [];
            var textspeakall = "";
            var abc = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890+-*/()[]=.'";
            var audio = new Audio(); var tsay = 0, vsay = 14.0;
            var speechstart = 0, speechend = 0;

            function speakhtml() {
                if ('speechSynthesis' in window)
                {
                    tsay = 1
                    if (textspeak.length < 1)
                    {
                        return;
                    }
                    var u = null;

                    try
                    {
                        u = new SpeechSynthesisUtterance(textspeak);
                    }
                    catch (err)
                    {
                        tsay = 0;
                    };
                    if (tsay == 0)
                    {
                        return;
                    }

                    textspeak = textspeak + " ";
                    u.lang = lang;//'en';
                    u.rate = 0.65;

                    u.onstart = function (event) {
                        var Timer = gettimer() / 1000.0;
                        audiotime0 = Timer;
                        audiotime1 = Timer + (textspeak.length / (vsay + 1.0));
                    };

                    u.onend = function (event) {
                        var Timer = gettimer() / 1000.0;
                        var len = textspeak.length;
                        if (len > 2) { vsay += (len / (Timer - audiotime0 + 0.01) - vsay) * 0.35; };
                        audiotime1 = audiotime0;
                    };

                    window.speechSynthesis.speak(u);


                    document.getElementById('intext').value = "";

                    document.getElementById('intext').focus();
                    //string name1=document.getElementById(say).value;

                }
            }

            var intext0 = ""; var vars = []; var icookie = 0;
            var qq = "";
 
            function say() {


                //qq =qq+ document.getElementById('msg').value;
                //document.getElementById('asd').innerHTML=qq;

                var intext = document.getElementById('intext').value;
                document.getElementById("intext").value = "";

                if (intext == "")
                {
                    intext = intext0;
                }//+" .";};

                intext = replaceall(intext, "&", " ");

                if (intext == "")
                {
                    intext = " ";
                }

                intext0 = intext;
                nextsub = 'say1("' + intext + '");';

                if (intext != "*")
                {
                    detectlang(intext + "+" + intext);
                }
                else
                {
                    say2(intext);
                }
				
                //qq =qq+ document.getElementById('msg').value;
                //document.getElementById('asd').innerHTML=qq;


            }

            function say1(intext) {
                nextsub = "say2(translatext);";
                translate(intext, lang, "en");
            }

            function say2(intext) {

                if (intext == "*")
                {
                    intext = oldmsg;
                }
                intext = formatinput(intext);
                text = "";
                text = processinput(intext);//eliza.transform(intext);
                nextsub = "say3(translatext);";
                translate(text, "en", lang);
            }

            function say3(text) {
                var msg = text;//intext+crlf+text+crlf+crlf;
                if (lang != "en" && msg.indexOf(">") > 1)
                {
                    msg = replaceall(msg, "> >", ">");
                    msg = replaceall(msg, "> ", ">Â§");
                    msg = replaceall(msg, ">Â§", crlf + "> ");
                }

                printmsg("You:\n" + intext0.substr(0, 40) + crlf + msg);
                var outmsg = msg.substr(msg.indexOf(">") + 2, 999);
                var patt = msg.substr(0, msg.indexOf(">"));

                if (outmsg.length < 0.65 * patt.length)
                {
                    outmsg = patt + " " + outmsg;
                }

                if (auxvar != "")
                {
                    msg += crlf + "auxvar=" + auxvar;
                };

                if (auxvar != "")
                {
                    printmsg(msg);
                }

                if (intext0.trim() == "exit")
                {
                    setTimeout("subquit();", 7000);
                }

                words = formatoutput(outmsg).split("");
                var words0 = "";
                textspeak = "";

                for (var i = 0; i < words.length; i++)
                {
                    if (words[i].length > 0) {
                        if (abc.indexOf(words[i]) >= 0 - 999)
                        {
                            textspeak = textspeak + words[i];
                        };
                        if (words0 != " " && words[i] == " ")
                        {
                            textspeak = textspeak + " ";
                        };
                        words0 = words[i];
                        ;
                    };
                };
                textspeakall = textspeak;
                audiotime1 = Math.min(audiotime1, 0.2 + gettimer() / 1000.0);
            }

            function speak() {
                if (textspeakall.length > 99)
                {
                    var i = 99;
                    for (var j = 0; j < 40; j++)
                    {
                        if (textspeakall.substr(i - j, 1) == " ")
                        {
                            break;
                        };
                    }
                    i = i - j;
                    textspeak = textspeakall.substr(0, i);
                    textspeakall = textspeakall.substr(i, textspeakall.length - i);
                }
                else
                {
                    textspeak = textspeakall; textspeakall = "";
                }
                textspeak = textspeak.toLowerCase();

                if (('speechSynthesis' in window) && (tsay == 1))
                {
                    speakhtml(); if (tsay == 1) { return; };
                }

                tsay = 0;
                var ttslang = lang;
                audiosrc = "http://translate.google.com/translate_tts?&tl=" + ttslang + "&q=" + encodeURIComponent(textspeak);
                textspeak = textspeak + " ";

                audio.type = "audio/x-wav"
                audio.src = audiosrc;
                var Timer = -1;
                audio.addEventListener('canplay', function () {
                    tsay = 0;
                    if (Timer < 0)
                    {
                        Timer = gettimer() / 1000.0;
                        audiotime0 = Timer;
                        audiotime1 = Timer + audio.duration;
                        if (textspeakall.length > 1) { audiotime1 -= 0.5; }
                        audio.play();
                    };
                });
                tsay = 1; audiotime1 = 8 + gettimer() / 1000.0;
                audio.load();
                document.getElementById('intext').value = "";
                document.getElementById('intext').focus();
            }
            function subquit() {
                document.location.href = "http://agent.blogvie.com/links/";
            }
            function testspeak() {
                var Timer = gettimer() / 1000.0;
                if ((Timer > audiotime0) && (Timer < audiotime1) && (textspeak.length > 0)) {
                    var i = parseInt(textspeak.length * (Timer - audiotime0) / (audiotime1 - audiotime0 + 0.01));
                    phoneme = textspeak.substr(i, 1);
                    if ((i > 0) && (phoneme == "h")) { if (textspeak.substr(i - 1, 1) == "c") { phoneme = "ch"; }; };
                    if ((i < (textspeak.length - 1)) && (phoneme == "c")) { if (textspeak.substr(i + 1, 1) == "h") { phoneme = "ch"; }; };
                } else {
                    phoneme = " ";
                    if (textspeakall.length > 1 && Timer > (audiotime1 + 0.02) &&
                       Timer > (audiotime0 + 0.02)) {
                        if (audiotime1 < (Timer - 0.01)) { audiotime1 = Timer - 0.01; }
                        if (audiotime0 < (Timer - 0.01)) { audiotime0 = Timer - 0.01; }
                        speak();
                    };
                }
            }
            function mykeypress(e) {
                if (e.which == 13 || e.keyCode == 13) {
                    var Timer = gettimer() / 1000.0;
                    if (Timer > audiotime0 + 1 && Timer > (3.1 + ttranslate / 1000)) { say(); }
                }

                if (e.which == 37 || e.keyCode == 37) { viewer.rotMatrix.rotateAboutYAxis(2); }
                if (e.which == 39 || e.keyCode == 39) { viewer.rotMatrix.rotateAboutYAxis(-2); }
                if (e.which == 38 || e.keyCode == 38) { viewer.rotMatrix.rotateAboutXAxis(2); }
                if (e.which == 40 || e.keyCode == 40) { viewer.rotMatrix.rotateAboutXAxis(-2); }
            }

            function readcookie() {
                var mycookie = document.cookie + ";";
                var pref = "html5elizabotagent=";
                var i = mycookie.indexOf(pref, 0);
                if (i < 0) { return; }
                i += pref.length;
                var j = mycookie.indexOf(";", i);
                if (j < i) { return; }
                var mycookie = mycookie.substring(i, j);
                var wcookie = mycookie.split("//");
                for (var i = 0; i < (wcookie.length - 1) ; i += 2) {
                    v[wcookie[i]] = wcookie[i + 1];
                }
            }
            function savecookie() {
                var mycookie = "";
                var cookie0 = document.cookie;
                for (var x in v) {
                    if ((x.indexOf('"', 0) < 0) && (x.indexOf("/", 0) < 0) && (v[x].indexOf('"', 0) < 0) && (v[x].indexOf("/", 0) < 0)) {
                        if ((x.indexOf('=', 0) < 0) && (x.indexOf(";", 0) < 0) && (v[x].indexOf('=', 0) < 0) && (v[x].indexOf(";", 0) < 0)) {
                            mycookie += x + "//" + v[x] + "//";
                            if (mycookie.length > 1900) { break; }
                        }
                    }
                }

                var pref = "html5elizabotagent=";
                mycookie = pref + mycookie + "; expires=Fri, 3 Aug 2100 20:47:11 UTC; path=/";
                if (mycookie.length > (3900 - cookie0.length)) { alert("could not save, cookie too long"); return; }
                document.cookie = mycookie;
            }
            function deletecookie() {
                var pref = "html5elizabotagent=";
                document.cookie = pref + ";expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/";
            }
            var head = document.getElementsByTagName('head')[0];
            var myjson = null, lang = "en", translatetext = "", ttranslate = 0;
            var myjson2 = null, myjson3 = null, nextsub = "alert(translatext);";
            var langs = ["ru-en", "ru-pl", "ru-uk", "ru-de", "ru-fr", "ru-es", "ru-it", "ru-bg", "ru-cs", "ru-tr", "ru-ro", "ru-sr", "en-ru", "en-uk", "en-de", "en-fr", "en-es", "en-it", "en-cs", "en-tr", "pl-ru", "pl-uk", "uk-ru", "uk-en", "uk-pl", "uk-de", "uk-fr", "uk-es", "uk-it", "uk-bg", "uk-cs", "uk-tr", "uk-ro", "uk-sr", "de-ru", "de-en", "de-uk", "fr-ru", "fr-en", "fr-uk", "es-ru", "es-en", "es-uk", "it-ru", "it-en", "it-uk", "bg-ru", "bg-uk", "cs-ru", "cs-en", "cs-uk", "tr-ru", "tr-en", "tr-uk", "ro-ru", "ro-uk", "sr-ru", "sr-uk"];
            function myapiCallback(response) {
                translatext = response.text[0];
                ttranslate = gettimer() - 2990;
                setTimeout(nextsub, 30);
            }
            function translate(text, langue, langue2) {
                if (langue == langue2) {
                    translatext = text;
                    ttranslate = gettimer() - 2990;
                    setTimeout(nextsub, 30); return 1;
                }
                var js = document.createElement("script");
                js.type = "text/javascript";
                js.async = false;
                var transtext = replaceall(text, " ", "+");
                var transurl = "https://translate.yandex.net/api/v1.5/tr.json/translate?key=" + yandexkey + "&lang=" + langue + "-" + langue2 + "&text=" + transtext + "&callback=myapiCallback";
                js.src = transurl;
                myjson = js;
                js.onload = function () { setTimeout("head.removeChild(myjson);", 100); };
                var timer = gettimer();
                if (timer > ttranslate + 3000) {
                    ttranslate = timer; head.appendChild(js); return 1;
                } else { return 0; }
            }
            var lang0 = "", lang1 = "", lang2 = "";
            function myapiCallback2(response) {
                if (lang1 == response.lang) { lang2 = lang1; lang = lang1; }
                else if (lang0 == response.lang) { lang2 = lang0; lang1 = lang0; lang = lang0; }
                else {
                    lang0 = lang1; lang1 = response.lang;
                    lang2 = response.lang;
                }
                if (listlang.indexOf(lang) < 0) { lang = "en"; }
                ttranslate = gettimer() - 2990;
                setTimeout(nextsub, 30);
            }
            function detectlang(text) {
                if (langcombo != "auto") {
                    lang = langcombo;
                    ttranslate = gettimer() - 2990;
                    setTimeout(nextsub, 30); return 1;
                }
                var js = document.createElement("script");
                js.type = "text/javascript";
                js.async = false;
                var transtext = replaceall(text, " ", "+");
                var transurl = "https://translate.yandex.net/api/v1.5/tr.json/detect?key=" + yandexkey + "&text=" + transtext + "&callback=myapiCallback2";
                js.src = transurl;
                myjson2 = js;
                js.onload = function () { setTimeout("head.removeChild(myjson2);", 100); };
                var timer = gettimer();
                if (timer > ttranslate + 3000) {
                    ttranslate = timer; head.appendChild(js); return 1;
                } else { return 0; }
            }
            var listlang = [], listlangname = [], ilang = 0;
            function myapiCallback3(response) {
                var listlangs = response.langs;
                ilang = 0;
                for (var langcode in listlangs) {
                    listlang[ilang] = langcode;
                    listlangname[ilang] = listlangs[langcode]; ilang += 1;
                }
                var combo = document.getElementById("combo");
                for (var i = 0; i < ilang; i++) {
                    var option = document.createElement('option');
                    option.text = listlang[i] + " " + listlangname[i];
                    option.value = listlang[i];
                    combo.add(option, 0);
                }

            }
            function getlistlang() {
                var js = document.createElement("script");
                js.type = "text/javascript";
                js.async = false;
                var transurl = "https://translate.yandex.net/api/v1.5/tr.json/getLangs?key=" + yandexkey + "&ui=en&callback=myapiCallback3";
                js.src = transurl;
                myjson3 = js;
                js.onload = function () { setTimeout("head.removeChild(myjson3);", 100); };
                var timer = gettimer();
                if (timer > ttranslate + 3000) {
                    ttranslate = timer; head.appendChild(js); return 1;
                } else { return 0; }
            }
            getlistlang();
            var langcombo = "en", icombo = 0;
            function subcombo() {
                langcombo = "en";
                icombo = document.getElementById('combo').selectedIndex;
                if (icombo >= 0 + ilang) {
                    langcombo = document.getElementById('combo')[icombo].id;
                } else {
                    langcombo = document.getElementById('combo')[icombo].value;
                }
                ttranslate = 0; if (langcombo != "auto") { lang = langcombo; };
                document.getElementById('intext').focus();
            }

            init();

        </script>

    </body>
</html>
